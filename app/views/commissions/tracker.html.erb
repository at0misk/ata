<style type="text/css">
	.container{
		min-height: 550px;
		background-color: white;
		margin-top: 15px;
	}
	.btn-col{
		text-align: center;
	}
	.sub-header{
		display: inline-block;
		margin-left: 10px;
	}
	.header-col{
		text-align: center;
	}
	.header-row{
		color: white;
		background-color: #153649;
		height: 60px;
		padding-top: 10px;
	}
	#tracker-form{
		margin-top: 15px;
	}
	.c2go-text{
		display: block;
	}
</style>

<div class="container">
	<div class="row header-row">
		<div class="col-sm-12 header-col">
			<h4 class="sub-header">Commission Tracking Form</h4>
		</div>
	</div>
	<form action="/commissions" method="post" class="form-horizontal" enctype="multipart/form-data" id="tracker-form">
			<input name="authenticity_token" value="<%= form_authenticity_token %>" type="hidden">
			<input name="commission[user_id]" value="<%= @user.id %>" type="hidden">
			<input name="commission[processed]" value="false" type="hidden">
			<div class="row">
				<div class="form-group">
				    <label for="agent_first_name" class="col-sm-2 control-label">Agent First Name</label>
				    <div class="col-sm-8">
				        <input name="commission[first]" type="text" class="form-control" id="agent_first_name" value="<%= @user.first %>" required/>
				    </div>
				</div>
			</div>
			<div class="row">
				<div class="form-group">
				    <label for="agent_last_name" class="col-sm-2 control-label">Agent Last Name</label>
				    <div class="col-sm-8">
				        <input name="commission[last]" type="text" class="form-control" id="agent_last_name" value="<%= @user.last %>" required/>
				    </div>
				</div>
			</div>
			<div class="row">
				<div class="form-group">
				    <label for="agent_email" class="col-sm-2 control-label">Agent Email</label>
				    <div class="col-sm-8">
				        <input name="commission[email]" type="text" class="form-control" id="agent_email" value="<%= @user.email %>" required/>
				    </div>
				</div>
			</div>
			<div class="row">
				<div class="form-group">
				    <label for="agent_address" class="col-sm-2 control-label">Address</label>
				    <div class="col-sm-8">
				        <input name="commission[address]" type="text" class="form-control" id="agent_address" value="<%= @user.address %>" required/>
				    </div>
				</div>
			</div>
			<div class="row">
				<div class="form-group">
				    <label for="agent_city" class="col-sm-2 control-label">City</label>
				    <div class="col-sm-8">
				        <input name="commission[city]" type="text" class="form-control" id="agent_city" value="<%= @user.city %>" required/>
				    </div>
				</div>
			</div>
			<div class="row">
				<div class="form-group">
				    <label for="agent_state" class="col-sm-2 control-label">State</label>
				    <div class="col-sm-8">
				        <input name="commission[state]" type="text" class="form-control" id="agent_state" value="<%= @user.state %>" required/>
				    </div>
				</div>
			</div>
			<div class="row">
				<div class="form-group">
				    <label for="zip" class="col-sm-2 control-label">Zip Code</label>
				    <div class="col-sm-8">
				        <input name="commission[zip]" type="text" class="form-control" id="zip" value="<%= @user.zip %>" required/>
				    </div>
				</div>
			</div>
			<div class="row">
				<div class="form-group">
				    <label for="agent_country" class="col-sm-2 control-label">Country</label>
				    <div class="col-sm-8">
				        <input name="commission[country]" type="text" class="form-control" id="agent_country" value="<%= @user.country %>" required/>
				    </div>
				</div>
			</div>
			<div class="row">
				<div class="form-group">
				    <label for="traveler_names" class="col-sm-2 control-label">Traveler Names</label>
				    <div class="col-sm-8">
				        <textarea name="commission[traveler_names]" class="form-control" id="traveler_names" rows="8" required></textarea>
				        <div class="characters">0/250</div>
				    </div>
				</div>
			</div>
			<div class="row">
				<div class="form-group">
				    <label for="traveler_phone" class="col-sm-2 control-label">Primary Traveler Phone</label>
				    <div class="col-sm-8">
				        <input name="commission[traveler_phone]" type="number" class="form-control" id="traveler_phone" required/>
				    </div>
				</div>
			</div>
			<div class="row">
				<div class="form-group">
				    <label for="traveler_email" class="col-sm-2 control-label">Primary Traveler Email</label>
				    <div class="col-sm-8">
				        <input name="commission[traveler_email]" type="text" class="form-control" id="traveler_email" required/>
				    </div>
				</div>
			</div>
			<div class="row">
				<div class="form-group">
				    <label for="departure" class="col-sm-2 control-label">Departure Date</label>
				    <div class="col-sm-8">
				        <input name="commission[depart]" type="date" class="form-control" id="departure" min="<%= Date.today %>" required/>
				    </div>
				</div>
			</div>
			<div class="row">
				<div class="form-group">
				    <label for="return" class="col-sm-2 control-label">Return Date</label>
				    <div class="col-sm-8">
				        <input name="commission[return]" type="date" class="form-control" id="return" required/>
				    </div>
				</div>
			</div>
			<div class="row">
				<div class="form-group">
				    <label for="itinerary" class="col-sm-2 control-label">Itinerary (Include Ship Name for Cruises)</label>
				    <div class="col-sm-8">
				        <textarea name="commission[itinerary]" class="form-control" id="itinerary" rows="8" required></textarea>
				        <div class="characters">0/250</div>
				    </div>
				</div>
			</div>
			<div class="row">
				<div class="form-group">
				    <label for="ticket" class="col-sm-2 control-label">Ticket # / Confirmation #</label>
				    <div class="col-sm-8">
				        <input name="commission[ticket]" type="text" class="form-control" id="ticket" required/>
				    </div>
				</div>
			</div>
			<div class="row">
				<div class="form-group">
				    <label for="supplier" class="col-sm-2 control-label">Supplier Name</label>
				    <div class="col-sm-8">
				        <input name="commission[supplier]" type="text" class="form-control" id="supplier" required/>
				    </div>
				</div>
			</div>
			<div class="row">
				<div class="form-group">
				    <label for="airline" class="col-sm-2 control-label">Airline</label>
				    <div class="col-sm-8">
				        <input name="commission[airline]" type="text" class="form-control" id="airline"/>
				    </div>
				</div>
			</div>
			<div class="row">
				<div class="form-group">
				    <label for="hotel" class="col-sm-2 control-label">Hotel</label>
				    <div class="col-sm-8">
				        <input name="commission[hotel]" type="text" class="form-control" id="hotel"/>
				    </div>
				</div>
			</div>
			<div class="row">
				<div class="form-group">
				    <label for="car_rental" class="col-sm-2 control-label">Car Rental Agency</label>
				    <div class="col-sm-8">
				        <input name="commission[car_rental]" type="text" class="form-control" id="car_rental"/>
				    </div>
				</div>
			</div>
<!-- 			<div class="row">
				<div class="form-group">
				    <label for="c2go" class="col-sm-2 control-label">C2GO ID #</label>
				    <div class="col-sm-8">
				        <input name="commission[c2go]" type="text" class="form-control" id="c2go" required/>
				        <small class="form-text text-muted c2go-text">Use the 5 digit number after CG found on the front of your card.</small>
				    </div>
				</div>
			</div> -->
			<div class="row">
				<div class="form-group">
				    <label for="total_price" class="col-sm-2 control-label">Trip Total Price</label>
				    <div class="col-sm-8">
				        <input name="commission[trip_total]" type="number" class="form-control" id="total_price" required/>
				    </div>
				</div>
			</div>
			<div class="row">
				<div class="form-group">
				    <label for="estimate" class="col-sm-2 control-label">Estimated Commission Total</label>
				    <div class="col-sm-8">
				        <input name="commission[estimate]" type="number" class="form-control" id="estimate" required/>
				    </div>
				</div>
			</div>
			<div class="row">
				<div class="form-group">
				    <label for="payment_form" class="col-sm-2 control-label">Form of Payment</label>
				    <div class="col-sm-8">
				        <input name="commission[form]" type="text" class="form-control" id="payment_form" required/>
				    </div>
				</div>
			</div>
			<div class="row">
				<div class="form-group">
				    <label for="last_4" class="col-sm-2 control-label">Last 4 Digits of Credit Card</label>
				    <div class="col-sm-8">
				        <input name="commission[last_4]" type="text" class="form-control" id="last_4" maxlength="4" />
				    </div>
				</div>
			</div>
			<div class="row">
				<div class="form-group">
				    <label for="commission[c2go]" class="col-sm-2 control-label">C2GO ID #</label>
				    <div class="col-sm-8">
				        <input name="commission[c2go]" type="text" class="form-control" id="commission[c2go]" value="<%= @user.c2go %>"required/>
				    </div>
				</div>
			</div>
			<div class="row">
				<div class="form-group">
				    <label for="comments" class="col-sm-2 control-label">Comments</label>
				    <div class="col-sm-8">
				        <textarea name="commission[comments]" class="form-control" id="comments" rows="8"></textarea>
				        <div class="characters">0/250</div>
				    </div>
				</div>
			</div>
			<div class="row">
				<div class="form-group">
				    <div class="col-sm-12 btn-col">
				        <button class="btn btn-contact">Submit</button>
				    </div>
				</div>
			</div>
			</form>
</div>

<!-- Confirm Modal -->
<div class="modal fade" id="confirmModal" tabindex="-1" role="dialog" aria-labelledby="confirmModalLabel" aria-hidden="true">
  <div class="modal-dialog" role="document">
    <div class="modal-content">
      <div class="modal-header" id="confirm-header">
        <h3 class="modal-title" id="confirmModalLabel">Thanks!  We'll be in touch</h3>
        <button type="button" class="close confirm-close" data-dismiss="modal" aria-label="Close">
          <span aria-hidden="true">&times;</span>
        </button>
      </div>
    </div>
  </div>
</div>

<script type="text/javascript">
	$(document).on('turbolinks:load',function(){

	 $('textarea').focus(function(){
		$(this).keyup(function(){
			var len = $(this).val().length;
			$(this).siblings('.characters').html(len + "/250")
			if(len >= 250){
				$(this).siblings('.characters').addClass('red');
				$(this).siblings('.characters').removeClass('green');
			}
			else if(len == 0 ){
				$(this).siblings('.characters').addClass('red');
				$(this).siblings('.characters').removeClass('green');
			}
			else{
				$(this).siblings('.characters').addClass('green');
				$(this).siblings('.characters').removeClass('red');
			}
		})
	 })

		$('#tracker-form').validate({
			rules: {
				'commission[c2go]': {
					maxlength: 7
				},
				'commission[traveler_names]': {
					maxlength: 250
				},
				'commission[itinerary]': {
					maxlength: 250
				},
				'commission[comments]': {
					maxlength: 250
				},
				'commission[last_4]': {
					maxlength: 4
				}
			},
	        highlight: function (element) {
	            $(element).closest('.form-group').removeClass('has-success').addClass('has-error');
	        },
	        success: function (element) {
	            element.closest('.form-group').removeClass('has-error').addClass('has-success');
	        }
		});
	})
</script>